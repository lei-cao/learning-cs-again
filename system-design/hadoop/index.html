<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hadoop: Hello World | Programming Lei</title>
    <meta name="description" content="All about Programming">
    <link rel="icon" href="/favicon.ico">
  <script type="application/javascript" src="/scripts/main.js?1550948135150"></script>
  <script type="application/javascript" src="/scripts/loader.js?1550948135150"></script>
  <script type="application/javascript" src="/scripts/pixi.min.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.4481bc46.css" as="style"><link rel="preload" href="/assets/js/app.cd6ddf19.js" as="script"><link rel="preload" href="/assets/js/2.a5967396.js" as="script"><link rel="preload" href="/assets/js/25.c814f8d1.js" as="script"><link rel="prefetch" href="/assets/js/10.41494e9c.js"><link rel="prefetch" href="/assets/js/11.0a951686.js"><link rel="prefetch" href="/assets/js/12.2a50ccb3.js"><link rel="prefetch" href="/assets/js/13.6712c64a.js"><link rel="prefetch" href="/assets/js/14.95254b3c.js"><link rel="prefetch" href="/assets/js/15.409e5c50.js"><link rel="prefetch" href="/assets/js/16.8278c5e4.js"><link rel="prefetch" href="/assets/js/17.7c2ff1e5.js"><link rel="prefetch" href="/assets/js/18.752fb6ba.js"><link rel="prefetch" href="/assets/js/19.516f866c.js"><link rel="prefetch" href="/assets/js/20.ea41fa6c.js"><link rel="prefetch" href="/assets/js/21.86d9aa3f.js"><link rel="prefetch" href="/assets/js/22.2ab7802b.js"><link rel="prefetch" href="/assets/js/23.8544d989.js"><link rel="prefetch" href="/assets/js/24.97f8cd03.js"><link rel="prefetch" href="/assets/js/26.27153cc3.js"><link rel="prefetch" href="/assets/js/27.214cb2a9.js"><link rel="prefetch" href="/assets/js/3.fdd2c9eb.js"><link rel="prefetch" href="/assets/js/4.4848fc45.js"><link rel="prefetch" href="/assets/js/5.81a6b9dc.js"><link rel="prefetch" href="/assets/js/6.ddcbab03.js"><link rel="prefetch" href="/assets/js/7.835cad3f.js"><link rel="prefetch" href="/assets/js/8.08d8b37a.js"><link rel="prefetch" href="/assets/js/9.2a2a2996.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4481bc46.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Programming Lei</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/system-design/" class="nav-link router-link-active">System Design</a></div> <a href="https://github.com/lei-cao/programming" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/system-design/" class="nav-link router-link-active">System Design</a></div> <a href="https://github.com/lei-cao/programming" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>System Design</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/system-design/" class="sidebar-link">System Design</a></li><li><a href="/system-design/hadoop/" class="active sidebar-link">Hadoop: Hello World</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/system-design/hadoop/#install" class="sidebar-link">Install</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="hadoop-hello-world"><a href="#hadoop-hello-world" aria-hidden="true" class="header-anchor">#</a> Hadoop: Hello World</h1> <p>Hadoop is a set of tools of big-data storage (HDFS), computing (MapReduce) and resource management (Yarn)
Well, the official document is long and quite user unfriendly. In order to deep dive it quicker, docker is the way to go.</p> <h2 id="install"><a href="#install" aria-hidden="true" class="header-anchor">#</a> Install</h2> <p>The easiest way to run Hadoop right away on my Mac of course is using Docker. Assuming you have docker installed.</p> <p>Here is a really good place <a href="https://github.com/HariSekhon/Dockerfiles" target="_blank" rel="noopener noreferrer">repo https://github.com/HariSekhon/Dockerfiles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for many big-data Dockerfiles.</p> <ol><li>Clone it</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>$ git clone git@github.com:HariSekhon/Dockerfiles.git
</code></pre></div><ol start="2"><li><code>cd</code> to <code>hadoop-dev</code> (I assume it's for development purpose) folder and run</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>$ docker-compose up
</code></pre></div><ol start="3"><li>Checking the available ports... Emm.. so many of them.</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>$ docker ps

0.0.0.0:8042-&gt;8042/tcp,
8020/tcp,
9000/tcp,
0.0.0.0:8088-&gt;8088/tcp,
0.0.0.0:19888-&gt;19888/tcp,
0.0.0.0:50010-&gt;50010/tcp,
0.0.0.0:50020-&gt;50020/tcp,
0.0.0.0:50070-&gt;50070/tcp,
0.0.0.0:50075-&gt;50075/tcp,
10020/tcp,
0.0.0.0:50090-&gt;50090/tcp
</code></pre></div><ol start="4"><li>Let's try to open them one by one from browser,</li></ol> <ul><li>8088: the cluster dashboard. There are status about Nodes, Applications, Conf, Scheduler.</li> <li>8042: the a similar dashboard but for single node.</li> <li>8020: Not working</li> <li>9000: Not working</li> <li>50010: Not working</li> <li>50020: &gt; It looks like you are making an HTTP request to a Hadoop IPC port. This is not the correct port for the web interface on this daemon.</li> <li>50070: A much better looking UI for Datanodes, Snapshot, Startup Progress, Logs and even a File System Browser like <code>Finder</code>. This looks like the UI for HDFS.</li> <li>50075: A similar UI as 50070 for single Datanode.</li></ul> <ol start="5"><li>After peeking the dashboards. I didn't see the UI for adding data. Let's see how should we do it.</li></ol> <p><a href="https://hadoop.apache.org/docs/r3.0.1/hadoop-project-dist/hadoop-common/FileSystemShell.html" target="_blank" rel="noopener noreferrer">File System Shell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> listed many commands to interact with HDFS.</p> <p>Attach the command line to the running container and run some Hadoop commands</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ docker exec -it hadoop-dev_hadoop-dev_1 /bin/bash

$ hadoop fs -mkdir /helloworld
$ hadoop fs -ls /
</code></pre></div><p>check <a href="http://locahost:50070/explorer.html" target="_blank" rel="noopener noreferrer">File Browser<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the <code>helloworld</code> dir we just created  is showing in the list. Cool.</p> <p>Let me put some data into it. I got some data set <a href="https://ed-public-download.app.cloud.gov/downloads/Most-Recent-Cohorts-Scorecard-Elements.csv" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> from <a href="https://github.com/awesomedata/awesome-public-datasets" target="_blank" rel="noopener noreferrer">this repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>In the container</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ curl https://ed-public-download.app.cloud.gov/downloads/Most-Recent-Cohorts-Scorecard-Elements.csv &gt; Most-Recent-Cohorts-Scorecard-Elements.csv

$ hadoop fs -put Most-Recent-Cohorts-Scorecard-Elements.csv /helloworld/input
</code></pre></div><p>And now I can see and download this file in from File Browser too.</p> <ol start="6"><li>Let's do some MapReduce with my data now.</li></ol> <p>Following the <a href="https://hadoop.apache.org/docs/r3.0.1/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html" target="_blank" rel="noopener noreferrer">MapReduce Tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> here, the WordCount MapReducer.</p> <p>Created the <code>WordCount.java</code> file. Trying to compile it by following the steps in the doc but, well, the docker file I used doesn't have <code>${JAVA_HOME}/lib/tools.jar</code>.</p> <p>An alternative way is</p> <div class="language-shell extra-class"><pre class="language-text"><code>// returns me the hadoop libraries path
$ hadoop classpath 

// to set it into the HADOOP_CLASSPATH
$ export HADOOP_CLASSPATH=$(hadoop classpath)

// will build to this folder
$ mkdir build 

// compile the java file into build folder
$ javac -cp $HADOOP_CLASSPATH WordCount.java -d build 

// created the JAR file from the built application
$ jar -cvf wc.jar -C build/ .

</code></pre></div><p>We created the WordCount jar file, now we cn run the WordCount MapReducer against our input data and output it.</p> <div class="language-shell extra-class"><pre class="language-text"><code>$ hadoop jar wc.jar WordCount /helloworld/input /helloworld/output
</code></pre></div><p>The job started running and finished with the counts. Coo!</p> <p>We are done for the first step on Hadoop: installed it and ran the hello world.</p></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cd6ddf19.js" defer></script><script src="/assets/js/2.a5967396.js" defer></script><script src="/assets/js/25.c814f8d1.js" defer></script>
  </body>
</html>
